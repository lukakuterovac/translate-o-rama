{% extends 'app/base.html' %}

{% block content %}
  <div class="row">
    <div class="col-md-12">
      <h1 class="text-center">Dashboard</h1>
    </div>
  </div>
  <div class="row">
    <h4>Username: {{ user.username }}</h4>
  </div>
  <div class="row">
    <h4>E-mail: {{ user.email }}</h4>
  </div>
  <div class="row">
    <h4>Token balance: {{ user.userprofile.token_balance }} token(s)</h4>
  </div>
  <div class="row">
    <h2 class="text-center">Jobs</h2>
  </div>
  <div class="mb-4">
    {% for job in jobs %}
      {% include 'includes/job_card.html' with job=job %}
      {% for bid in bids %}
        {% if bid.job == job %}
          <div class="row my-3">
            <h5 class="col-3 d-block"><a href="#">{{ bid.bid_user }}</a>: {{ bid.bid }}</h5><button type="button" class="btn btn-primary col-1 ms-5">Assign</button>
          </div>
        {% endif %}
      {% endfor %}
    {% empty %}
      <div class="row">
        No jobs posted.
      </div>
    {% endfor %}
  </div>
  <div class="row">
    <h2 class="text-center">Messages</h2>
  </div>
  <div class="mb-4">
    {% for message in messages %}
      <div class="card my-2">
        <div class="card-body m-2">
          <h4>{{ message.from_user.username }}</h4>
          <p>Sent: {{ message.send_date }}</p>
          <p>{{ message.text }}</p>
          <a href="#" class="card-link">{{ message.from_user }}'s profile</a>
        </div>
      </div>
    {% empty %}
      <div class="row">
        No messages.
      </div>
    {% endfor %}
  </div>
{% endblock content %}